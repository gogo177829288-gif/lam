<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LAMPPOLI ‚Äî Enter the Unknown</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Orbitron:wght@400;700;900&family=Noto+Sans+JP:wght@300;400;700&display=swap');
    
    * { margin: 0; padding: 0; box-sizing: border-box; }
    
    body {
      min-height: 100vh;
      overflow: hidden;
      font-family: 'Orbitron', sans-serif;
      color: #1a1a1a;
    }
    
    /* Anime Sky Background */
    .sky-background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(180deg, 
        #87CEEB 0%,
        #98D8E8 15%,
        #B4E4F5 30%,
        #FFE4EC 50%,
        #FFCCD5 65%,
        #FFB7C5 80%,
        #FF9EAD 100%
      );
      z-index: 0;
    }
    
    /* Clouds */
    .clouds {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 60%;
      pointer-events: none;
      z-index: 1;
      overflow: hidden;
    }
    
    .cloud {
      position: absolute;
      background: rgba(255,255,255,0.9);
      border-radius: 50%;
      filter: blur(3px);
      animation: floatCloud linear infinite;
    }
    
    .cloud::before, .cloud::after {
      content: '';
      position: absolute;
      background: rgba(255,255,255,0.9);
      border-radius: 50%;
    }
    
    .cloud::before {
      width: 70%;
      height: 80%;
      top: -30%;
      left: 15%;
    }
    
    .cloud::after {
      width: 60%;
      height: 70%;
      top: -20%;
      right: 10%;
    }
    
    @keyframes floatCloud {
      from { transform: translateX(-200px); }
      to { transform: translateX(calc(100vw + 200px)); }
    }
    
    /* Sakura Tree */
    .sakura-tree {
      position: fixed;
      bottom: 0;
      left: -5%;
      width: 45%;
      height: 100%;
      z-index: 2;
      pointer-events: none;
    }
    
    .tree-trunk {
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 8%;
      height: 50%;
      background: linear-gradient(90deg, #3d2817 0%, #5c3d2a 30%, #6b4c3a 50%, #5c3d2a 70%, #3d2817 100%);
      border-radius: 5px 5px 0 0;
    }
    
    .tree-branch {
      position: absolute;
      background: linear-gradient(90deg, #4a3320 0%, #6b4c3a 50%, #4a3320 100%);
      border-radius: 10px;
      transform-origin: left center;
    }
    
    .branch-1 { bottom: 45%; left: 52%; width: 35%; height: 2.5%; transform: rotate(-20deg); }
    .branch-2 { bottom: 55%; left: 53%; width: 40%; height: 2.8%; transform: rotate(-10deg); }
    .branch-3 { bottom: 65%; left: 52%; width: 32%; height: 2.2%; transform: rotate(-30deg); }
    .branch-4 { bottom: 58%; left: 46%; width: 28%; height: 2.2%; transform: rotate(-165deg); }
    .branch-5 { bottom: 72%; left: 51%; width: 28%; height: 2%; transform: rotate(-15deg); }
    .branch-6 { bottom: 68%; left: 44%; width: 24%; height: 2%; transform: rotate(-155deg); }
    .branch-7 { bottom: 78%; left: 50%; width: 22%; height: 1.8%; transform: rotate(-25deg); }
    
    /* Sakura Blossoms on Tree */
    .blossom-cluster {
      position: absolute;
      border-radius: 50%;
      background: radial-gradient(ellipse at center, 
        rgba(255,192,203,0.95) 0%, 
        rgba(255,182,193,0.9) 30%, 
        rgba(255,150,170,0.8) 60%, 
        transparent 100%
      );
      filter: blur(2px);
      animation: blossomSway 4s ease-in-out infinite;
    }
    
    @keyframes blossomSway {
      0%, 100% { transform: scale(1) rotate(0deg); }
      50% { transform: scale(1.03) rotate(1deg); }
    }
    
    /* Falling Sakura Petals */
    .sakura-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 15;
      overflow: hidden;
    }
    
    .sakura {
      position: absolute;
      top: -50px;
      animation: fall linear infinite;
    }
    
    .sakura::before {
      content: '';
      display: block;
      width: var(--size);
      height: var(--size);
      background: linear-gradient(135deg, #ffc0cb 0%, #ffb6c1 50%, #ff91a4 100%);
      border-radius: 50% 0 50% 50%;
      transform: rotate(45deg);
      opacity: 0.9;
      box-shadow: 0 0 8px rgba(255, 183, 197, 0.6);
    }
    
    @keyframes fall {
      0% {
        transform: translateY(-10vh) rotate(0deg) translateX(0);
        opacity: 1;
      }
      25% {
        transform: translateY(25vh) rotate(90deg) translateX(35px);
      }
      50% {
        transform: translateY(50vh) rotate(180deg) translateX(-35px);
      }
      75% {
        transform: translateY(75vh) rotate(270deg) translateX(35px);
      }
      100% {
        transform: translateY(110vh) rotate(360deg) translateX(-20px);
        opacity: 0.4;
      }
    }
    
    /* Ground/Grass */
    .ground {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 12%;
      background: linear-gradient(180deg, #8bc88b 0%, #6ab06a 40%, #5a9c5a 100%);
      z-index: 1;
    }
    
    /* 3D Canvas */
    #canvas-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 10;
    }
    
    /* Title */
    .title {
      position: fixed;
      bottom: 10%;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
      z-index: 20;
      pointer-events: none;
    }
    
    .title h1 {
      font-family: 'Bebas Neue', sans-serif;
      font-size: clamp(2.5rem, 10vw, 7rem);
      letter-spacing: 0.15em;
      color: white;
      text-shadow: 
        0 0 40px rgba(255, 150, 180, 0.7),
        0 4px 20px rgba(0, 0, 0, 0.4),
        3px 3px 0 #ff9eb5,
        -1px -1px 0 rgba(255,200,210,0.5);
    }
    
    .title .subtitle {
      font-family: 'Noto Sans JP', sans-serif;
      font-size: clamp(0.5rem, 1.5vw, 0.85rem);
      letter-spacing: 0.4em;
      color: rgba(255, 255, 255, 0.95);
      margin-top: 0.5rem;
      font-weight: 300;
      text-shadow: 0 2px 15px rgba(0,0,0,0.4);
    }
    
    .title .jp-text {
      font-family: 'Noto Sans JP', sans-serif;
      font-size: clamp(0.7rem, 1.5vw, 1rem);
      color: #fff5f7;
      margin-bottom: 0.3rem;
      letter-spacing: 0.3em;
      text-shadow: 0 2px 15px rgba(0,0,0,0.4);
    }
    
    /* Corner UI */
    .corner-ui {
      position: fixed;
      z-index: 30;
      font-size: 0.5rem;
      color: rgba(255, 255, 255, 0.75);
      letter-spacing: 0.15em;
      pointer-events: none;
      text-shadow: 0 1px 8px rgba(0,0,0,0.4);
    }
    
    .corner-ui.top-left { top: 2rem; left: 2rem; }
    .corner-ui.top-right { top: 2rem; right: 2rem; text-align: right; }
    .corner-ui.bottom-left { bottom: 2rem; left: 2rem; }
    .corner-ui.bottom-right { bottom: 2rem; right: 2rem; text-align: right; }
    
    .corner-ui .value {
      color: #fff;
      display: block;
      margin-top: 0.3rem;
    }
    
    /* CTA */
    .cta {
      position: fixed;
      bottom: 3%;
      left: 50%;
      transform: translateX(-50%);
      z-index: 30;
      padding: 0.8rem 2.5rem;
      background: rgba(255, 255, 255, 0.25);
      border: 2px solid rgba(255, 255, 255, 0.7);
      color: white;
      font-family: 'Orbitron', sans-serif;
      font-size: 0.6rem;
      letter-spacing: 0.3em;
      cursor: pointer;
      transition: all 0.4s;
      backdrop-filter: blur(10px);
      border-radius: 30px;
      text-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }
    
    .cta:hover {
      background: rgba(255, 255, 255, 0.45);
      border-color: #fff;
      box-shadow: 0 0 35px rgba(255, 255, 255, 0.6);
      transform: translateX(-50%) scale(1.05);
    }
    
    /* Loading */
    .loading {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(180deg, #87CEEB 0%, #FFB7C5 100%);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      transition: opacity 1s, visibility 1s;
    }
    
    .loading.hidden {
      opacity: 0;
      visibility: hidden;
    }
    
    .loading-text {
      font-size: 0.9rem;
      letter-spacing: 0.5em;
      color: white;
      text-shadow: 0 2px 15px rgba(0,0,0,0.25);
      animation: loadingPulse 1.5s ease-in-out infinite;
    }
    
    .loading-sakura {
      font-size: 3rem;
      margin-bottom: 1rem;
      animation: loadingSpin 2s linear infinite;
    }
    
    @keyframes loadingPulse {
      0%, 100% { opacity: 0.5; }
      50% { opacity: 1; }
    }
    
    @keyframes loadingSpin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }
    
    /* Instructions */
    .instructions {
      position: fixed;
      top: 2rem;
      left: 50%;
      transform: translateX(-50%);
      z-index: 25;
      font-size: 0.5rem;
      color: rgba(255, 255, 255, 0.65);
      letter-spacing: 0.2em;
      pointer-events: none;
      text-shadow: 0 1px 8px rgba(0,0,0,0.3);
    }
  </style>
</head>
<body>
  
  <!-- Loading Screen -->
  <div class="loading" id="loading">
    <div class="loading-sakura">üå∏</div>
    <div class="loading-text">LOADING...</div>
  </div>
  
  <!-- Sky Background -->
  <div class="sky-background"></div>
  
  <!-- Clouds -->
  <div class="clouds" id="clouds"></div>
  
  <!-- Ground -->
  <div class="ground"></div>
  
  <!-- Sakura Tree -->
  <div class="sakura-tree">
    <div class="tree-trunk"></div>
    <div class="tree-branch branch-1"></div>
    <div class="tree-branch branch-2"></div>
    <div class="tree-branch branch-3"></div>
    <div class="tree-branch branch-4"></div>
    <div class="tree-branch branch-5"></div>
    <div class="tree-branch branch-6"></div>
    <div class="tree-branch branch-7"></div>
    <!-- Blossom clusters -->
    <div class="blossom-cluster" style="width:140px;height:110px;top:12%;left:58%;"></div>
    <div class="blossom-cluster" style="width:170px;height:130px;top:18%;left:70%;animation-delay:-1s;"></div>
    <div class="blossom-cluster" style="width:120px;height:95px;top:22%;left:48%;animation-delay:-2s;"></div>
    <div class="blossom-cluster" style="width:150px;height:120px;top:8%;left:63%;animation-delay:-0.5s;"></div>
    <div class="blossom-cluster" style="width:110px;height:85px;top:28%;left:75%;animation-delay:-1.5s;"></div>
    <div class="blossom-cluster" style="width:130px;height:100px;top:15%;left:38%;animation-delay:-2.5s;"></div>
    <div class="blossom-cluster" style="width:160px;height:115px;top:3%;left:53%;animation-delay:-3s;"></div>
    <div class="blossom-cluster" style="width:100px;height:75px;top:32%;left:42%;animation-delay:-1.8s;"></div>
    <div class="blossom-cluster" style="width:90px;height:70px;top:25%;left:80%;animation-delay:-0.8s;"></div>
    <div class="blossom-cluster" style="width:125px;height:95px;top:5%;left:72%;animation-delay:-2.2s;"></div>
  </div>
  
  <!-- 3D Canvas -->
  <div id="canvas-container"></div>
  
  <!-- Falling Sakura Petals -->
  <div class="sakura-container" id="sakura-container"></div>
  
  <!-- Instructions -->
  <div class="instructions">DRAG TO ROTATE ‚Ä¢ SCROLL TO ZOOM</div>
  
  <!-- Title at bottom -->
  <div class="title">
    <p class="jp-text">Ê°ú„ÅÆÁâ©Ë™û</p>
    <h1>LAMPPOLI</h1>
    <p class="subtitle">Enter the Unknown</p>
  </div>
  
  <!-- Corner UI -->
  <div class="corner-ui top-left">
    STATUS<br>
    <span class="value">‚óè ONLINE</span>
  </div>
  <div class="corner-ui top-right">
    SEASON<br>
    <span class="value">01</span>
  </div>
  <div class="corner-ui bottom-left">
    VER 1.0.0
  </div>
  <div class="corner-ui bottom-right">
    2026
  </div>
  
  <!-- CTA -->
  <button class="cta" onclick="alert('Stories coming soon!')">BEGIN JOURNEY</button>

  <!-- Three.js and VRM -->
  <script type="importmap">
  {
    "imports": {
      "three": "https://cdn.jsdelivr.net/npm/three@0.154.0/build/three.module.js",
      "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.154.0/examples/jsm/",
      "@pixiv/three-vrm": "https://cdn.jsdelivr.net/npm/@pixiv/three-vrm@2.0.6/lib/three-vrm.module.min.js"
    }
  }
  </script>
  
  <script type="module">
    import * as THREE from 'three';
    import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
    import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
    import { VRMLoaderPlugin, VRMUtils } from '@pixiv/three-vrm';
    
    // Create Clouds
    const cloudsContainer = document.getElementById('clouds');
    for (let i = 0; i < 10; i++) {
      const cloud = document.createElement('div');
      cloud.className = 'cloud';
      const size = Math.random() * 120 + 80;
      const top = Math.random() * 35;
      const duration = Math.random() * 50 + 70;
      const delay = Math.random() * -80;
      cloud.style.cssText = `
        width: ${size}px;
        height: ${size * 0.6}px;
        top: ${top}%;
        animation-duration: ${duration}s;
        animation-delay: ${delay}s;
      `;
      cloudsContainer.appendChild(cloud);
    }
    
    // Create Sakura Petals
    const sakuraContainer = document.getElementById('sakura-container');
    const petalCount = 70;
    
    for (let i = 0; i < petalCount; i++) {
      const petal = document.createElement('div');
      petal.className = 'sakura';
      
      const size = Math.random() * 14 + 8;
      const left = Math.random() * 100;
      const duration = Math.random() * 10 + 10;
      const delay = Math.random() * 20;
      
      petal.style.cssText = `
        --size: ${size}px;
        left: ${left}%;
        animation-duration: ${duration}s;
        animation-delay: ${delay}s;
      `;
      
      sakuraContainer.appendChild(petal);
    }
    
    // Mouse tracking
    let mouseX = 0;
    let mouseY = 0;
    document.addEventListener('mousemove', (e) => {
      mouseX = (e.clientX / window.innerWidth) * 2 - 1;
      mouseY = -(e.clientY / window.innerHeight) * 2 + 1;
    });
    
    // Scene setup
    const container = document.getElementById('canvas-container');
    const scene = new THREE.Scene();
    
    // Camera
    const camera = new THREE.PerspectiveCamera(30, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.set(0, 1.2, 4.5);
    
    // Renderer
    const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
    renderer.outputEncoding = THREE.sRGBEncoding;
    renderer.toneMapping = THREE.ACESFilmicToneMapping;
    renderer.toneMappingExposure = 1.3;
    container.appendChild(renderer.domElement);
    
    // Controls
    const controls = new OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;
    controls.dampingFactor = 0.05;
    controls.minDistance = 2.5;
    controls.maxDistance = 7;
    controls.target.set(0, 1, 0);
    controls.maxPolarAngle = Math.PI / 1.8;
    controls.minPolarAngle = Math.PI / 4;
    controls.update();
    
    // Lights - warm anime sunset lighting
    const ambientLight = new THREE.AmbientLight(0xffeedd, 0.9);
    scene.add(ambientLight);
    
    const sunLight = new THREE.DirectionalLight(0xffddbb, 1.3);
    sunLight.position.set(5, 10, 5);
    scene.add(sunLight);
    
    const fillLight = new THREE.DirectionalLight(0xffeeff, 0.5);
    fillLight.position.set(-5, 5, -5);
    scene.add(fillLight);
    
    const rimLight = new THREE.DirectionalLight(0xffccdd, 0.6);
    rimLight.position.set(0, 3, -5);
    scene.add(rimLight);
    
    // Warm accent light
    const warmLight = new THREE.PointLight(0xffaa77, 0.4, 10);
    warmLight.position.set(3, 2, 2);
    scene.add(warmLight);
    
    // Load VRM model
    let currentVrm = null;
    let blinkTimer = 0;
    let isBlinking = false;
    
    const loader = new GLTFLoader();
    
    loader.register((parser) => {
      return new VRMLoaderPlugin(parser);
    });
    
    loader.load(
      'elysia.vrm',
      (gltf) => {
        const vrm = gltf.userData.vrm;
        
        if (vrm) {
          currentVrm = vrm;
          
          VRMUtils.removeUnnecessaryJoints(vrm.scene);
          VRMUtils.removeUnnecessaryVertices(vrm.scene);
          
          // Rotate model to face camera
          vrm.scene.rotation.y = Math.PI;
          
          // Position model slightly right
          vrm.scene.position.set(0.3, 0, 0);
          
          scene.add(vrm.scene);
          
          console.log('VRM loaded successfully!');
        }
        
        // Hide loading
        setTimeout(() => {
          document.getElementById('loading').classList.add('hidden');
        }, 500);
      },
      (progress) => {
        if (progress.total > 0) {
          const percent = (progress.loaded / progress.total * 100).toFixed(0);
          document.querySelector('.loading-text').textContent = `LOADING... ${percent}%`;
        }
      },
      (error) => {
        console.error('Error loading VRM:', error);
        document.querySelector('.loading-text').textContent = 'ERROR LOADING MODEL';
      }
    );
    
    // Animation
    const clock = new THREE.Clock();
    
    function animate() {
      requestAnimationFrame(animate);
      
      const delta = clock.getDelta();
      const elapsed = clock.elapsedTime;
      
      if (currentVrm) {
        // Update VRM
        currentVrm.update(delta);
        
        // Gentle floating/breathing animation
        currentVrm.scene.position.y = Math.sin(elapsed * 0.8) * 0.035;
        
        // Subtle body sway
        currentVrm.scene.rotation.z = Math.sin(elapsed * 0.5) * 0.015;
        
        // Head/eyes follow cursor
        if (currentVrm.lookAt) {
          currentVrm.lookAt.target.set(
            mouseX * 2,
            1 + mouseY * 0.5,
            3
          );
        }
        
        // Blinking animation
        blinkTimer += delta;
        if (!isBlinking && blinkTimer > 2.5 + Math.random() * 3) {
          isBlinking = true;
          blinkTimer = 0;
        }
        
        if (isBlinking && currentVrm.expressionManager) {
          const blinkProgress = blinkTimer / 0.12;
          if (blinkProgress < 1) {
            const blinkValue = Math.sin(blinkProgress * Math.PI);
            currentVrm.expressionManager.setValue('blink', blinkValue);
          } else {
            currentVrm.expressionManager.setValue('blink', 0);
            isBlinking = false;
            blinkTimer = 0;
          }
        }
        
        // Slow idle rotation
        currentVrm.scene.rotation.y = Math.PI + Math.sin(elapsed * 0.25) * 0.1;
      }
      
      controls.update();
      renderer.render(scene, camera);
    }
    animate();
    
    // Resize
    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });
  </script>
  
</body>
</html>
